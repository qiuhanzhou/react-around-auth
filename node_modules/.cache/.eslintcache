[{"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/index.js":"1","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/reportWebVitals.js":"2","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/App.js":"3","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Header.js":"4","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Footer.js":"5","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Main.js":"6","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/PopupWithForm.js":"7","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/ImagePopup.js":"8","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Card.js":"9","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/utils/api.js":"10","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Login.js":"11","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Register.js":"12","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/utils/auth.js":"13","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/ProtectedRoute.js":"14","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/InfoTooltip.js":"15","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/contexts/CurrentUserContext.js":"16","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/EditProfilePopup.js":"17","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/EditAvatarPopup.js":"18","/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/AddPlacePopup.js":"19"},{"size":632,"mtime":1663470684434,"results":"20","hashOfConfig":"21"},{"size":362,"mtime":1652291605000,"results":"22","hashOfConfig":"21"},{"size":7187,"mtime":1663473268081,"results":"23","hashOfConfig":"21"},{"size":781,"mtime":1663474538112,"results":"24","hashOfConfig":"21"},{"size":198,"mtime":1652291605000,"results":"25","hashOfConfig":"21"},{"size":1653,"mtime":1663382307205,"results":"26","hashOfConfig":"21"},{"size":1063,"mtime":1652291605000,"results":"27","hashOfConfig":"21"},{"size":898,"mtime":1652291605000,"results":"28","hashOfConfig":"21"},{"size":1717,"mtime":1663473334777,"results":"29","hashOfConfig":"21"},{"size":2179,"mtime":1663357395442,"results":"30","hashOfConfig":"21"},{"size":2797,"mtime":1663474240843,"results":"31","hashOfConfig":"21"},{"size":3347,"mtime":1663473643684,"results":"32","hashOfConfig":"21"},{"size":1277,"mtime":1663471853606,"results":"33","hashOfConfig":"21"},{"size":280,"mtime":1663130380284,"results":"34","hashOfConfig":"21"},{"size":936,"mtime":1663394131773,"results":"35","hashOfConfig":"21"},{"size":83,"mtime":1663357239573,"results":"36","hashOfConfig":"21"},{"size":2051,"mtime":1663357710512,"results":"37","hashOfConfig":"21"},{"size":979,"mtime":1663357694182,"results":"38","hashOfConfig":"21"},{"size":1665,"mtime":1663357744313,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","suppressedMessages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1clqi7h",{"filePath":"43","messages":"44","suppressedMessages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"51"},{"filePath":"52","messages":"53","suppressedMessages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","suppressedMessages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"58","messages":"59","suppressedMessages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","suppressedMessages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"64","messages":"65","suppressedMessages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"67","messages":"68","suppressedMessages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"51"},{"filePath":"70","messages":"71","suppressedMessages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","suppressedMessages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","suppressedMessages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"79","messages":"80","suppressedMessages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","suppressedMessages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"85","messages":"86","suppressedMessages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"88","messages":"89","suppressedMessages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"91","messages":"92","suppressedMessages":"93","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","suppressedMessages":"96","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","suppressedMessages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/index.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/reportWebVitals.js",[],[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/App.js",["100","101"],[],"import { useEffect, useState } from 'react'\nimport Header from './Header'\nimport Main from './Main'\nimport Footer from './Footer'\nimport ImagePopup from './ImagePopup'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport { Route, Switch, useHistory, withRouter } from 'react-router-dom'\nimport api from '../utils/api'\nimport { CurrentUserContext } from '../../src/contexts/CurrentUserContext'\nimport Login from './Login'\nimport Register from './Register'\nimport ProtectedRoute from './ProtectedRoute'\nimport * as auth from '../utils/auth'\n\nfunction App() {\n  let history = useHistory()\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false)\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false)\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false)\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false)\n  const [currentUser, setCurrentUser] = useState({})\n  const [cards, setCards] = useState([])\n  const [selectedCard, setSelectedCard] = useState({})\n  const [loggedIn, setLoggedIn] = useState(false)\n  const [email, setEmail] = useState('')\n\n  useEffect(() => {\n    api\n      .getInitialCards()\n      .then((values) => {\n        setCards(values)\n      })\n      .catch((err) => {\n        console.log(`can't get inital cards: ${err}`)\n      })\n  }, [])\n\n  useEffect(() => {\n    api\n      .getUserInfo()\n      .then((currentUser) => {\n        console.log(currentUser)\n        setCurrentUser(currentUser)\n      })\n      .catch((err) => {\n        console.log(`can't get inital user info: ${err}`)\n      })\n  }, [])\n\n  useEffect(handleTokenCheck, [])\n\n  function handleCardLike(card) {\n    // Check one more time if this card was already liked\n    const isLiked = card.likes.some((user) => user._id === currentUser._id)\n\n    // Send a request to the API and getting the updated card data\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then(\n        //api returns the new liked/unliked card object\n        (newCard) => {\n          console.log(newCard)\n          setCards(\n            // pass in a function to reliably get the value of the current state\n            (state) =>\n              state.map((currentCard) =>\n                currentCard._id === card._id ? newCard : currentCard,\n              ),\n          )\n        },\n      )\n      .catch((err) => {\n        console.log(`can't chage like card status: ${err}`)\n      })\n  }\n\n  function handleCardDelete(card) {\n    // Send a request to the API and getting the updated card data\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((state) =>\n          state.filter((currentCard) => currentCard._id !== card._id),\n        )\n      })\n      .catch((err) => {\n        console.log(`can't delete card: ${err}`)\n      })\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsEditAvatarPopupOpen(false)\n    setIsImagePopupOpen(false)\n    setSelectedCard({})\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n    setIsImagePopupOpen(true)\n  }\n\n  function handleCloseAllPopups(e) {\n    if (\n      (e.type === 'click' &&\n        (e.target.classList.contains('modal__close-button') ||\n          e.target.classList.contains('modal_open'))) ||\n      (e.type === 'keydown' && e.key === 'Escape')\n    ) {\n      closeAllPopups()\n    }\n  }\n\n  function handleUpdateUser(newUserInfo) {\n    api\n      .setUserInfo(newUserInfo)\n      .then((newUserInfo) => {\n        //update currentUser state from received  modified profile data\n        setCurrentUser(newUserInfo)\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(`can't set user info: ${err}`)\n      })\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    api\n      .setUserAvatar({ avatar })\n      .then(\n        //api returns the updated current user info\n        //update currentUser state from received  modified profile data\n        (newUserInfo) => {\n          setCurrentUser(newUserInfo)\n          closeAllPopups()\n        },\n      )\n      .catch((err) => {\n        console.log(`can't update user avatar: ${err}`)\n      })\n  }\n\n  function handleAddPlaceSubmit(newAddPlaceInfo) {\n    // Send a request to the API and getting the updated card data\n    api\n      .addCard(newAddPlaceInfo)\n      .then(\n        //api request returns a response with the obj of the new card\n        (newCard) => {\n          setCards([newCard, ...cards])\n          closeAllPopups()\n        },\n      )\n      .catch((err) => {\n        console.log(`can't add card: ${err}`)\n      })\n  }\n\n  function handleTokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      const jwt = localStorage.getItem('jwt')\n      // we're checking the user's token\n      auth.checkToken(jwt).then((res) => {\n        console.log('checkToken: ', res)\n        setEmail(res.data.email)\n        if (res.data) {\n          setLoggedIn(true)\n          history.push('/')\n        }\n      })\n    }\n  }\n\n  function onLogin(email) {\n    // handleTokenCheck()\n    setEmail(email)\n\n    setLoggedIn(true)\n  }\n\n  function onSignOut() {\n    setLoggedIn(false)\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className='App'>\n        <Switch>\n          <Route path='/signup'>\n            <Register />\n          </Route>\n          <Route path='/signin'>\n            <Login handleLogin={onLogin} />\n          </Route>\n          <ProtectedRoute path='/' loggedIn={loggedIn}>\n            <div className='page'>\n              <Header email={email} text='Log Out' loggedIn={loggedIn} />\n              <Main\n                onEditProfileClick={handleEditProfileClick}\n                onAddPlaceClick={handleAddPlaceClick}\n                onEditAvatarClick={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                cards={cards}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n              />\n              <Footer />\n\n              <EditProfilePopup\n                isOpen={isEditProfilePopupOpen}\n                onClose={handleCloseAllPopups}\n                onUpdateUser={handleUpdateUser}\n              />\n\n              <AddPlacePopup\n                isOpen={isAddPlacePopupOpen}\n                onClose={handleCloseAllPopups}\n                onAddPlaceSubmit={handleAddPlaceSubmit}\n              />\n\n              <EditAvatarPopup\n                isOpen={isEditAvatarPopupOpen}\n                onClose={handleCloseAllPopups}\n                onUpdateAvatar={handleUpdateAvatar}\n              />\n\n              <ImagePopup\n                isOpen={isImagePopupOpen}\n                onClose={handleCloseAllPopups}\n                card={selectedCard}\n              />\n            </div>\n          </ProtectedRoute>\n        </Switch>\n      </div>\n    </CurrentUserContext.Provider>\n  )\n}\n\nexport default withRouter(App)\n",[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Header.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Footer.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Main.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/PopupWithForm.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/ImagePopup.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Card.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/utils/api.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Login.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/Register.js",["102","103"],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/utils/auth.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/ProtectedRoute.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/InfoTooltip.js",["104"],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/contexts/CurrentUserContext.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/EditProfilePopup.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/EditAvatarPopup.js",[],[],"/Users/yangchen/Documents/ZQH/Practicum/Projects/react-around-auth/src/components/AddPlacePopup.js",[],[],{"ruleId":"105","severity":1,"message":"106","line":53,"column":31,"nodeType":"107","endLine":53,"endColumn":33,"suggestions":"108"},{"ruleId":"109","severity":1,"message":"110","line":195,"column":12,"nodeType":"111","messageId":"112","endLine":195,"endColumn":21},{"ruleId":"113","severity":1,"message":"114","line":9,"column":19,"nodeType":"115","messageId":"116","endLine":9,"endColumn":21},{"ruleId":"109","severity":1,"message":"117","line":20,"column":7,"nodeType":"111","messageId":"112","endLine":20,"endColumn":14},{"ruleId":"109","severity":1,"message":"118","line":2,"column":8,"nodeType":"111","messageId":"112","endLine":2,"endColumn":18},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["119"],"no-unused-vars","'onSignOut' is defined but never used.","Identifier","unusedVar","no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","'history' is assigned a value but never used.","'ImagePopup' is defined but never used.",{"desc":"120","fix":"121"},"Update the dependencies array to be: [history]",{"range":"122","text":"123"},[1715,1717],"[history]"]